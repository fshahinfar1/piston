figsize: [5.5,4]
subplots:
  - lines:
    - label: 'with swapping'
      x: [1, 2,  8,  16, 32, 64, 128, 256, 512, 1024]
      y: [1.64, 1.67, 1.68,  1.78, 2.01, 2.51, 4.13, 7.91, 17.84, 48.42]
      color: 'tab:red'
      linestyle: '-'
      marker: 'o'
      markersize: 3
    - label: 'baseline'
      x: [1, 2,  8,  16, 32, 64, 128, 256, 512, 1024]
      y: [2.67, 2.81, 3.0, 3.2, 3.62, 4.55, 6.41, 10.85, 20.04, 39.5]
      color: 'k'
      linestyle: ':'
      marker: 'x'
      markersize: 3
    legend:
      ncol: 2
      loc: 'upper left'
    grid: true
    xlogscale: 2
    ylabel: 'Time (minutes)'
    xlabel: "Batch size\n(Batch KV-cache size GB)"
    # xticks: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 16, 32, 64, 128, 256, 512, 512, 1024]
    # xtick_labels: [ "1\n0.02362445741891861 GB","2\n0.04724891483783722 GB","3\n0.0712854266166687 GB","4\n0.0950472354888916 GB","5\n0.1188090443611145 GB","6\n0.1425708532333374 GB","7\n0.1663326621055603 GB","8\n0.1900944709777832 GB","9\n0.2138562798500061 GB","10\n0.237618088722229 GB","11\n0.2613798975944519 GB","12\n0.2851417064666748 GB","13\n0.3089035153388977 GB","16\n0.3801889419555664 GB","32\n0.7603778839111328 GB","64\n1.5207557678222656 GB","128\n3.0415115356445312 GB","256\n6.0830230712890625 GB","512\n12.166046142578125 GB","512\n12.166046142578125 GB","1024\n24.33209228515625 GB" ]
    # xticks: [1, 2, 4, 8, 16, 32, 64, 128, 256, 512, 1024]
    # xtick_labels: [ "1\n0.02","2\n0.05","4\n0.1","8\n0.19","16\n0.38","32\n0.76","64\n1.52","128\n3.04","256\n6.08","512\n12.16","1024\n24.33" ]
    xticks: [1, 4, 16, 64, 256, 1024]
    xtick_labels: [ "1\n0.02","4\n0.1","16\n0.38","64\n1.52","256\n6.08","1024\n24.33" ]
    annotate:
      - xy: [1, 3.67]
        text: -38.5 %
      - xy: [4, 3.98]
        text: -41.6 %
      - xy: [16, 4.3]
        text: -44.3 %
      - xy: [40, 5.65]
        text: -44.8 %
      - xy: [100, 8.51]
        text: -35.5 %
      - xy: [180, 12.95]
        text: -27.1 %
      - xy: [400, 22.14]
        text: -10.9 %
      - xy: [800, 40.6]
        text: 22.5 %
output: gpt_oss.pdf
